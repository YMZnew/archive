<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>ARnft example showing an simple red cube</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=1">
	<link rel="stylesheet" href="nft-style.css">
	<p id="dateY"></p>
</head>
<body>

	<audio id="myAudio">
  <source src="chamran.mp3" type="audio/mpeg">
</audio>
	
	
		<script src="three.min.js"></script>
		<script src="ARnft.js"></script>
        <script type='text/javascript' src='Tween.js'></script>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             

    <script>
	    
	    let cssRenderer;
	    let cssObject;
	    let planeMesh;
	    let cssScene;
	    let rt;
	    
      
			ARnft.ARnft.init(800, 600, "archive/DataNFT/notebook", 'config3.json', true, true)
			.then((nft) => {
				rt = nft;
				document.addEventListener('onInitThreejsRendering', (ev) => {
					const renderer = ev.detail.renderer;
					const scene = ev.detail.scene;
					const camera = ev.detail.camera;
					
  					renderer.outputEncoding = THREE.sRGBEncoding;
                                        renderer.textureEncoding = THREE.sRGBEncoding
					renderer.physicallyCorrectLights = true;
				
					const light1  = new THREE.AmbientLight(0xFFFFFF, 0.3);
					    light1.name = 'ambient_light';
					    camera.add( light1 );

					let directionalLight = new THREE.DirectionalLight(0xFFFFFF, 0.8 * Math.PI);
					directionalLight.position.set(0.5, 0, 0.866);
					camera.add(directionalLight);
	
				})
				
				try{
				
                                 //   alert("init");
					// create the plane mesh
					var material = new THREE.MeshBasicMaterial({ wireframe: true });
					var geometry = new THREE.PlaneGeometry();
					planeMesh= new THREE.Mesh( geometry, material );
					// add it to the WebGL scene
					planeMesh.scale.set(200,200,200)
					nft.root.add(planeMesh);
					
					var element = document.createElement( 'img' );
					element.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Qasem_Soleimani_with_Ya_Zahra_Headband.jpg/424px-Qasem_Soleimani_with_Ya_Zahra_Headband.jpg';
					element.style.width  = "200px";
					element.style.height = "200px";
					//give it a z-index so we can place it behind our webGL canvas element
					element.style.zIndex = 999;
					// create the object3d for this element
					cssObject = new THREE.CSS3DObject( element );
					// we reference the same position and rotation 
					cssObject.position = planeMesh.position;
					cssObject.rotation = planeMesh.rotation;
					cssScene = new THREE.Scene()
					cssScene.add(cssObject);
					cssRenderer = new THREE.CSS3DRenderer();
				//alert("finish init");
				}catch(e){
				//	alert(e);
				}
			
				document.addEventListener('getWindowSize', (ev) => {
				      w = ev.detail.sw
				      h = ev.detail.sh
					
					try{
//alert("setsize init");
						cssRenderer.setSize(w,h)
						cssRenderer.domElement.style.position = 'absolute';
							cssRenderer.domElement.style.top = 0;
						nft.tickExtend = function (){
                                                       // alert("load");
// 	  						cssObject.position = planeMesh.position;
// 							cssObject.rotation = planeMesh.rotation;
							 cssRenderer.render( cssScene, nft.renderer.camera );
							cssRenderer.domElement.style.position = 'absolute';
							cssRenderer.domElement.style.top = 0;
                                                  //    alert("finish load");
						}
//alert("finish setsize");
					      }catch(e){
					      }
					
				});
				
				document.addEventListener('getMatrixGL_RH', (ev) => {
					try{
			
					}catch(e){
						alert(e)
					}
				});
            });

    </script>
</body>

</html>
